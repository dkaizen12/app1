### âœ… `home.dart` avec commentaires

```dart
// ğŸ“¦ Importations nÃ©cessaires
import 'dart:async'; // Pour utiliser Future, async/await
import 'dart:io'; // Pour manipuler les fichiers (File, Directory)
import 'package:flutter/material.dart'; // Pour crÃ©er l'interface utilisateur Flutter
import 'package:path_provider/path_provider.dart'; // Pour accÃ©der au dossier local de l'app

/// ğŸ—ƒï¸ Classe qui gÃ¨re la lecture et lâ€™Ã©criture du compteur localement
class CounterStorage {
  /// ğŸ” RÃ©cupÃ¨re le chemin du rÃ©pertoire local pour stocker les fichiers
  Future<String> get _localPath async {
    final directory = await getApplicationDocumentsDirectory(); // dossier documents pour Android/iOS
    return directory.path; // retourne le chemin en tant que chaÃ®ne
  }

  /// ğŸ“„ RÃ©cupÃ¨re un objet `File` pointant vers le fichier counter.txt dans le rÃ©pertoire local
  Future<File> get _localFile async {
    final path = await _localPath; // attend que le chemin soit obtenu
    return File('$path/counter.txt'); // crÃ©e un fichier dans ce chemin
  }

  /// ğŸ“¥ Lit le fichier et retourne le contenu comme un entier
  Future<int> readCounter() async {
    try {
      final file = await _localFile; // accÃ¨de au fichier
      final contents = await file.readAsString(); // lit le contenu comme string
      return int.parse(contents); // convertit en entier
    } catch (e) {
      // Si erreur (ex. : fichier non trouvÃ©), retourne 0 par dÃ©faut
      return 0;
    }
  }

  /// ğŸ“¤ Ã‰crit la valeur du compteur dans le fichier (remplace lâ€™ancien contenu)
  Future<File> writeCounter(int counter) async {
    final file = await _localFile; // accÃ¨de au fichier
    return file.writeAsString('$counter'); // Ã©crit la valeur comme chaÃ®ne de caractÃ¨res
  }
}
```

---

```dart
/// ğŸ§± Widget principal avec Ã©tat : il utilise le service de lecture/Ã©criture
class FlutterDemo extends StatefulWidget {
  const FlutterDemo({super.key, required this.storage});

  final CounterStorage storage; // Instance pour gÃ©rer les fichiers

  @override
  State<FlutterDemo> createState() => _FlutterDemoState(); // crÃ©e lâ€™Ã©tat liÃ©
}
```

---

```dart
/// ğŸ” Lâ€™Ã©tat associÃ© au widget FlutterDemo
class _FlutterDemoState extends State<FlutterDemo> {
  int _counter = 0; // compteur local en mÃ©moire

  @override
  void initState() {
    super.initState();
    // ğŸ”„ Lecture initiale du compteur depuis le fichier
    widget.storage.readCounter().then((value) {
      setState(() {
        _counter = value; // met Ã  jour lâ€™Ã©tat avec la valeur lue
      });
    });
  }

  /// ğŸ“ˆ IncrÃ©mente le compteur et lâ€™Ã©crit dans le fichier
  Future<File> _incrementCounter() {
    setState(() {
      _counter++; // met Ã  jour lâ€™Ã©tat local
    });

    return widget.storage.writeCounter(_counter); // sauvegarde la nouvelle valeur
  }

  /// ğŸ¨ Construction de lâ€™interface
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('Reading and Writing Files')), // barre en haut
      body: Center(
        // contenu centrÃ© dans lâ€™Ã©cran
        child: Text(
          'Button tapped $_counter time${_counter == 1 ? '' : 's'}.', // message dynamique
          style: const TextStyle(fontSize: 20),
        ),
      ),
      floatingActionButton: FloatingActionButton(
        onPressed: _incrementCounter, // appel de la fonction au clic
        tooltip: 'Increment', // infobulle
        child: const Icon(Icons.add), // icÃ´ne du bouton
      ),
    );
  }
}
```

---

### âœ… RÃ©sumÃ© rapide :

| Ã‰lÃ©ment                              | RÃ´le                                     |
| ------------------------------------ | ---------------------------------------- |
| `getApplicationDocumentsDirectory()` | Trouver un dossier local sÃ»r             |
| `File(path)`                         | Pointer vers un fichier                  |
| `readAsString()`                     | Lire son contenu texte                   |
| `writeAsString()`                    | Ã‰crire du texte dedans                   |
| `setState()`                         | Actualiser dynamiquement lâ€™interface     |
| `Future<File>`                       | Permet dâ€™attendre lâ€™opÃ©ration asynchrone |

Souhaites-tu maintenant une version stylisÃ©e comme `Stories +243` ou un export en package rÃ©utilisable ?



## ğŸ“š RÃ©sumÃ© des **fonctions utilisÃ©es** :

| Fonction / classe                     | RÃ´le                                                                    |
| ------------------------------------- | ----------------------------------------------------------------------- |
| `getApplicationDocumentsDirectory()`  | Fournit un dossier spÃ©cifique Ã  l'application pour stocker les fichiers |
| `File(path)`                          | CrÃ©e une instance de fichier avec un chemin donnÃ©                       |
| `file.readAsString()`                 | Lit le contenu dâ€™un fichier texte                                       |
| `file.writeAsString()`                | Ã‰crit une chaÃ®ne dans le fichier                                        |
| `int.parse()`                         | Convertit une chaÃ®ne en entier                                          |
| `setState()`                          | DÃ©clenche une reconstruction de lâ€™UI avec la nouvelle valeur            |
| `initState()`                         | MÃ©thode appelÃ©e Ã  la crÃ©ation initiale du widget                        |
| `FloatingActionButton`                | Bouton flottant pour les actions principales                            |
| `MaterialApp` / `Scaffold` / `AppBar` | Structure de l'application Flutter avec Material Design                 |